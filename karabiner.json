{
    "profiles": [
        {
            "complex_modifications": {
                "rules": [

                    {
                        "description": "Direct App Switching",
                        "manipulators": [
                            {
                                "description": "Backtick -> Main App Slot (dynamic)",
                                "from": {
                                    "key_code": "grave_accent_and_tilde",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "if [ -f /tmp/karabiner_main_app ]; then open -a \"$(cat /tmp/karabiner_main_app)\" && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'; else open -a 'Arc' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'; fi"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + Shift + Backtick -> Set current app as main slot",
                                "from": {
                                    "key_code": "grave_accent_and_tilde",
                                    "modifiers": {
                                        "mandatory": ["left_option", "left_shift"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "osascript -e 'tell application \"System Events\" to set frontmostApp to name of first application process whose frontmost is true' -e 'if frontmostApp is \"Code\" then set frontmostApp to \"Visual Studio Code\"' -e 'do shell script \"echo \" & quoted form of frontmostApp & \" > /tmp/karabiner_main_app\"' -e 'display notification \"Main app slot set to: \" & frontmostApp with title \"Karabiner App Switcher\"'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + 1 -> VS Code",
                                "from": {
                                    "key_code": "1",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Visual Studio Code' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + 2 -> iTerm",
                                "from": {
                                    "key_code": "2",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'iTerm' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + 3 -> Sequel Ace",
                                "from": {
                                    "key_code": "3",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                }, 
                                "to": [
                                    {
                                        "shell_command": "open -a 'Sequel Ace' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + 4 -> Sublime Text",
                                "from": {
                                    "key_code": "4",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Sublime Text' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + Q -> Arc",
                                "from": {
                                    "key_code": "q",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Arc' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + W -> Firefox",
                                "from": {
                                    "key_code": "w",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Firefox' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + E -> Notion",
                                "from": {
                                    "key_code": "e",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Notion' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + F -> Finder",
                                "from": {
                                    "key_code": "f",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Finder' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + A -> Discord",
                                "from": {
                                    "key_code": "a",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Discord' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + S -> Messenger",
                                "from": {
                                    "key_code": "s",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Messenger' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + D -> WhatsApp",
                                "from": {
                                    "key_code": "d",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'WhatsApp' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + Z -> Spotify",
                                "from": {
                                    "key_code": "z",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Spotify' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + X -> YouTube Music",
                                "from": {
                                    "key_code": "x",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'YouTube Music' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Alt + C -> Zen Browser",
                                "from": {
                                    "key_code": "c",
                                    "modifiers": {
                                        "mandatory": ["left_option"]
                                    }
                                },
                                "to": [
                                    {
                                        "shell_command": "open -a 'Zen Browser' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Cmd alone -> Switch to most recent app",
                                "from": {
                                    "key_code": "left_command"
                                },
                                "to": [
                                    {
                                        "key_code": "left_command"
                                    }
                                ],
                                "to_if_alone": [
                                    {
                                        "key_code": "tab",
                                        "modifiers": ["left_command"]
                                    },
                                    {
                                        "shell_command": "sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Caps Lock alone -> Main App Slot (dynamic)",
                                "from": {
                                    "key_code": "caps_lock"
                                },
                                "to": [
                                    {
                                        "key_code": "caps_lock"
                                    }
                                ],
                                "to_if_alone": [
                                    {
                                        "shell_command": "if [ -f /tmp/karabiner_main_app ]; then open -a \"$(cat /tmp/karabiner_main_app)\" && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'; else open -a 'Arc' && sleep 0.1 && /usr/bin/osascript -e 'tell application \"System Events\" to keystroke \"h\" using {option down, command down}'; fi"
                                    }
                                ],
                                "type": "basic"
                            },
                            {
                                "description": "Control alone -> Cycle through windows of same app",
                                "from": {
                                    "key_code": "left_control"
                                },
                                "to": [
                                    {
                                        "key_code": "left_control"
                                    }
                                ],
                                "to_if_alone": [
                                    {
                                        "key_code": "grave_accent_and_tilde",
                                        "modifiers": ["left_command"]
                                    }
                                ],
                                "type": "basic"
                            }
                        ]
                    }
                ]
            },
            "name": "Default profile",
            "selected": true,
            "virtual_hid_keyboard": { "keyboard_type_v2": "ansi" }
        }
    ]
}